<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon_package_v0.16/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon_package_v0.16/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon_package_v0.16/favicon-16x16.png">
  <link rel="mask-icon" href="/images/favicon_package_v0.16/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/images/favicon_package_v0.16/site.webmanifest">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"haah.kr","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.15.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Update: ‘모호한 앰퍼샌드‘ 원작자에게 허락을 구해 해당 글의 번역본을 추가함.   개발하면서 누구나 한번쯤은 궁금해하지만, 아무도 정확히 알려주지 않는 모호한 앰퍼샌드에 대해 얕게 한번 파보았습니다. 현상공고 관리자 페이지에서 reg_mem_type이라는 변수를 검색할 수 있는 옵션을 추가했더니, 페이징 영역을 클릭하면 계속 오류가 발생했다. ®이라">
<meta property="og:type" content="blog">
<meta property="og:title" content="모호한 앰퍼샌드(&amp;, ampersand)">
<meta property="og:url" content="https://haah.kr/2017/09/08/ambiguous-ampersands/">
<meta property="og:site_name" content="ha-ah">
<meta property="og:description" content="Update: ‘모호한 앰퍼샌드‘ 원작자에게 허락을 구해 해당 글의 번역본을 추가함.   개발하면서 누구나 한번쯤은 궁금해하지만, 아무도 정확히 알려주지 않는 모호한 앰퍼샌드에 대해 얕게 한번 파보았습니다. 현상공고 관리자 페이지에서 reg_mem_type이라는 변수를 검색할 수 있는 옵션을 추가했더니, 페이징 영역을 클릭하면 계속 오류가 발생했다. ®이라">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mathiasbynens.be/_img/ambiguous-ampersands/tool@2x.png">
<meta property="article:published_time" content="2017-09-07T15:46:22.000Z">
<meta property="article:modified_time" content="2018-02-13T06:27:02.000Z">
<meta property="article:author" content="youngiggy">
<meta property="article:tag" content="HTML">
<meta property="article:tag" content="PHP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mathiasbynens.be/_img/ambiguous-ampersands/tool@2x.png">


<link rel="canonical" href="https://haah.kr/2017/09/08/ambiguous-ampersands/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://haah.kr/2017/09/08/ambiguous-ampersands/","path":"2017/09/08/ambiguous-ampersands/","title":"모호한 앰퍼샌드(&, ampersand)"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>모호한 앰퍼샌드(&, ampersand) | ha-ah</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=354302543"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":354302543,"only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="ha-ah" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">ha-ah</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">로그, 게으른 로그</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%ED%98%84%EC%83%81"><span class="nav-number">1.</span> <span class="nav-text">현상</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%9B%90%EC%9D%B8"><span class="nav-number">2.</span> <span class="nav-text">원인</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%84%B8%EB%AF%B8%EC%BD%9C%EB%A1%A0-%EC%97%86%EC%96%B4%EB%8F%84-%EB%B3%80%ED%99%98%ED%95%B4%EC%A3%BC%EB%8A%94-%EA%B2%BD%EC%9A%B0"><span class="nav-number">3.</span> <span class="nav-text">세미콜론 없어도 변환해주는 경우</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%ED%95%B4%EA%B2%B0-in-PHP"><span class="nav-number">4.</span> <span class="nav-text">해결 in PHP</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%EB%AA%A8%ED%98%B8%ED%95%9C-%EC%95%B0%ED%8D%BC%EC%83%8C%EB%93%9C"><span class="nav-number"></span> <span class="nav-text">모호한 앰퍼샌드</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Character-references-in-HTML"><span class="nav-number">1.</span> <span class="nav-text">Character references in HTML</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unencoded-ampersands-in-HTML4"><span class="nav-number">2.</span> <span class="nav-text">Unencoded ampersands in HTML4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ambiguous-ampersands-in-HTML5"><span class="nav-number">3.</span> <span class="nav-text">Ambiguous ampersands in HTML5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-pedantic-nitty-gritty"><span class="nav-number">4.</span> <span class="nav-text">The pedantic nitty-gritty</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mothereffing-ambiguous-ampersands"><span class="nav-number">5.</span> <span class="nav-text">Mothereffing ambiguous ampersands</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">youngiggy</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">115</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:youngiggy@gmail.com" title="E-Mail → mailto:youngiggy@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/profile.php?id=100001259884599" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;profile.php?id&#x3D;100001259884599" rel="noopener me" target="_blank"><i class="fab fa-facebook fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/jooyoungiggy" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;jooyoungiggy" rel="noopener me" target="_blank"><i class="fab fa-instagram fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/big/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://haah.kr/2017/09/08/ambiguous-ampersands/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="youngiggy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ha-ah">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="모호한 앰퍼샌드(&, ampersand) | ha-ah">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          모호한 앰퍼샌드(&, ampersand)
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-09-08 00:46:22" itemprop="dateCreated datePublished" datetime="2017-09-08T00:46:22+09:00">2017-09-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2018-02-13 15:27:02" itemprop="dateModified" datetime="2018-02-13T15:27:02+09:00">2018-02-13</time>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/09/08/ambiguous-ampersands/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/09/08/ambiguous-ampersands/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Update: ‘<a target="_blank" rel="noopener" href="https://mathiasbynens.be/notes/ambiguous-ampersands">모호한 앰퍼샌드</a>‘ 원작자에게 허락을 구해 해당 글의 번역본을 추가함. </p>
<hr>
<p>개발하면서 누구나 한번쯤은 궁금해하지만, 아무도 정확히 알려주지 않는 모호한 앰퍼샌드에 대해 얕게 한번 파보았습니다.</p>
<h2 id="현상"><a href="#현상" class="headerlink" title="현상"></a>현상</h2><p>공고 관리자 페이지에서 reg_mem_type이라는 변수를 검색할 수 있는 옵션을 추가했더니, 페이징 영역을 클릭하면 계속 오류가 발생했다.</p>
<p>®이라는 특수문자가 전송되는 것을 보고 페이징쪽 소스를 보니</p>
<p>소스보기로는 이상이 없어보이나 개발자도구로는 ®가 찍히는 것을 확인.</p>
<h2 id="원인"><a href="#원인" class="headerlink" title="원인"></a>원인</h2><p>일부 html entity는 세미콜론이 없어도 전환이 가능하다는 것을 알게 됐다.</p>
<p>예를 들어, </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;a href=&quot;test?test=test&amp;reg=aa&amp;region=bb&amp;reg_ion=cc&quot;&gt;</span><br><span class="line">    test?test=test&amp;reg=aa&amp;region=bb&amp;reg_ion=cc</span><br><span class="line">&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<p>와 같은 태그는 화면에는</p>
<p><code>test?test=test®=aa®ion=bb®_ion=cc</code></p>
<p>처럼 보이고, 개발자 도구에서 보면</p>
<p><code>test?test=test&amp;reg=aa&amp;region=bb®_ion=cc</code></p>
<p>처럼 보인다.</p>
<p>이는 화면에 보여줄 때는 &amp;reg가 세미콜론이 없어도 마크로 변환해줄 수 있기 때문이며,</p>
<p>이게 attribute의 값으로 들어갈 때는 변환이 되지 않는다.</p>
<p>다만, &amp;reg_ion 처럼 &amp;reg 다음에 특수문자나 공백 등이 올 경우, 이는 ®마크로 변환이 된다.</p>
<h2 id="세미콜론-없어도-변환해주는-경우"><a href="#세미콜론-없어도-변환해주는-경우" class="headerlink" title="세미콜론 없어도 변환해주는 경우"></a>세미콜론 없어도 변환해주는 경우</h2><p>세미콜론이 없어도 마크로 변환해주는 경우가 어디에 정의되어 있는지를 잘 모르겠다.</p>
<p>이런 현상에 관한 질문을 좀 찾아봤다.</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/15532252/why-is-reg-being-rendered-as-without-the-bounding-semicolon">https://stackoverflow.com/questions/15532252/why-is-reg-being-rendered-as-without-the-bounding-semicolon</a></p>
<p>여기서는 <a target="_blank" rel="noopener" href="https://html.spec.whatwg.org/multipage/named-characters.html#named-character-references">named-character-references</a>를 예로 들며, 세미콜론이 없어도 되는 문자 참조를 아래와 같이 정의한다.</p>
<blockquote>
<p>AElig, AMP, Aacute, Acirc, Agrave, Aring, Atilde, Auml, COPY, Ccedil, ETH, Eacute, Ecirc, Egrave, Euml, GT, Iacute, Icirc, Igrave, Iuml, LT, Ntilde, Oacute, Ocirc, Ograve, Oslash, Otilde, Ouml, QUOT, REG, THORN, Uacute, Ucirc, Ugrave, Uuml, Yacute, aacute, acirc, acute, aelig, agrave, amp, aring, atilde, auml, brvbar, ccedil, cedil, cent, copy, curren, deg, divide, eacute, ecirc, egrave, eth, euml, frac12, frac14, frac34, gt, iacute, icirc, iexcl, igrave, iquest, iuml, laquo, lt, macr, micro, middot, nbsp, not, ntilde, oacute, ocirc, ograve, ordf, ordm, oslash, otilde, ouml, para, plusmn, pound, quot, raquo, reg, sect, shy, sup1, sup2, sup3, szlig, thorn, times, uacute, ucirc, ugrave, uml, uuml, yacute, yen, yuml</p>
</blockquote>
<p>그런데 위에 언급한 named-character-references에서의 리스트와는 꽤 다르다.</p>
<p>예를 들어, 이 references에서 정의된 ycirc는 &amp;ycirc_라고 해도 attribute에서 변환되지 않는다.</p>
<p>아직 브라우저가 구현을 안 한 것인지, HTML4 버전 때 정의된 것 만 세미콜론으로 안 끝나도 되는지는 잘 모르겠다.</p>
<p>아직 정확한 근거를 못 찾았는데, 누가 좀 알려줬으면 좋겠다.</p>
<p>정 궁금하면 더 찾아봤을텐데, 정확한 리스트를 안다고 달라질 게 없기 때문에 해결책으로 넘어간다.</p>
<h2 id="해결-in-PHP"><a href="#해결-in-PHP" class="headerlink" title="해결 in PHP"></a>해결 in PHP</h2><p>페이징 링크에 들어가는 부분</p>
<p>$queryString &#x3D; ‘&amp;’ . http_build_query($params, ‘’, ‘&amp;’) ;</p>
<p>와 같은 소스를</p>
<p>$queryString &#x3D; ‘&amp;’ . http_build_query($params, ‘’, ‘&amp;amp;’) ;</p>
<p>이와 같이 &amp;만을 escape 처리함.</p>
<h1 id="모호한-앰퍼샌드"><a href="#모호한-앰퍼샌드" class="headerlink" title="모호한 앰퍼샌드"></a>모호한 앰퍼샌드</h1><p>아래는 이 현상을 제대로 이해하기 위해 모호한 앰퍼샌드에 관한 글을 번역한 것이다.</p>
<p>원문 : <a target="_blank" rel="noopener" href="https://mathiasbynens.be/notes/ambiguous-ampersands">https://mathiasbynens.be/notes/ambiguous-ampersands</a></p>
<p>각 용어는 아래와 같이 번역함(<a target="_blank" rel="noopener" href="http://www.clearboth.org/">clearboth</a>에서 번역한 문서 참고해서 맞춤)</p>
<ul>
<li>Ambiguous : 모호한<ul>
<li>모호한이라는 뜻으로 주로 쓰이는 것 같고, 여러 뜻으로 해석할 수 있는..이라는 의미도 될 수 있음</li>
</ul>
</li>
<li>named character : 명명된 문자</li>
</ul>
<h2 id="Character-references-in-HTML"><a href="#Character-references-in-HTML" class="headerlink" title="Character references in HTML"></a>Character references in HTML</h2><p>HTML안에서의 문자 참조</p>
<blockquote>
<p>Before explaining what ambiguous ampersands are, let’s talk about character references.</p>
</blockquote>
<p>모호한 앰퍼샌드가 뭔지 설명하기 전에 문자 참조에 대해 이야기 해보자</p>
<blockquote>
<p>There are different kinds of character references. The HTML 4.01 spec divides them in two groups, but really there are three:</p>
</blockquote>
<p>문자 참조에는 여러가지 종류가 있다. HTML4.01 스펙에는 두 개의 그룹으로 나누었지만, 사실 세가지가 있다.</p>
<ul>
<li>decimal numeric character references, e.g. &amp;#169;<ul>
<li>정수 문자 참조</li>
</ul>
</li>
<li>hexadecimal numeric character references, e.g. &amp;#xA9;<ul>
<li>16진수 문자 참조</li>
</ul>
</li>
<li>named character references, e.g. &amp;copy;<ul>
<li>명명된 문자 참조</li>
</ul>
</li>
</ul>
<blockquote>
<p>Character references should always start with a U+0026 AMPERSAND character (&amp;) and end with a U+003B SEMICOLON character (;).</p>
</blockquote>
<p>문자 참조는 &amp;로 시작하고 ;로 끝나야 한다.</p>
<blockquote>
<p>Fun fact: the list of named character references in the HTML spec includes &amp;amp; and &amp;AMP;, but also &amp;amp and &amp;AMP (without the trailing semicolon). The same goes for a few other entities. This is done for backwards-compatibility reasons. This way, the spec dictates that foo &amp;amp bar should be rendered as “foo &amp; bar”, even though it’s invalid markup (because of the missing trailing semicolon). More on this in a minute…</p>
</blockquote>
<p>재밌는 사실은: HTML 스펙에서 명명된 문자 참조는 &amp;amp;와 &amp;AMP;를 포함하는데, 세미콜론(;)이 뒤에 붙지 않은 &amp;amp와 &amp;AMP도 있다는 것이다. 다른 일부 엔티티도 마찬가지이다. 이건 하위 호환성을 때문에 이렇게 됐다. 이 방식으로, (세미콜론이 빠져있으면) 유효하지 않은 마크업임에도 불구하고, 스펙에선 “foo &amp;amp bar”를 “foo &amp; bar”로 랜더할 수 있게 지시하고 있다. 조금 이따가 다시 다루겠다.</p>
<blockquote>
<p>In this post, we’ll take a closer look at what happens if there’s an unencoded ampersand that’s not part of a character reference in your HTML code. Is it valid? Is it invalid? And what do “ambiguous ampersands” have to do with all this?</p>
</blockquote>
<p>이 포스트에선, HTML안에 지정된 문자 참조의 일부가 아니면서 인코드도 안 된 앰퍼샌드가 있을 때 어떤 일이 벌어지는 지 좀 더 자세히 살펴볼 것이다. 그게 유효한 문법인가? 아니면 유효하지 않은가? 모호한 앰퍼샌드는 이 모든 것과 어떤 관계가 있는가?</p>
<h2 id="Unencoded-ampersands-in-HTML4"><a href="#Unencoded-ampersands-in-HTML4" class="headerlink" title="Unencoded ampersands in HTML4"></a>Unencoded ampersands in HTML4</h2><p>인코딩되지 않은 앰퍼샌드</p>
<blockquote>
<p>The HTML 4.01 spec mentions this:</p>
</blockquote>
<p>HTML 4.01 스펙에서 이를 언급하기를:</p>
<blockquote>
<p>The URI that is constructed when a form is submitted may be used as an anchor-style link (e.g., the href attribute for the &lt;a&gt; element). Unfortunately, the use of the &amp; character to separate form fields interacts with its use in SGML attribute values to delimit character entity references. For example, to use the URI http&amp;colon;&#x2F;&#x2F;host&#x2F;?x&#x3D;1&amp;y&#x3D;2 as a linking URI, it must be written as &lt;a href&#x3D;”http&amp;colon;&#x2F;&#x2F;host&#x2F;?x&#x3D;1&amp;#38;y&#x3D;2”&gt; or &lt;a href&#x3D;”http&amp;colon;&#x2F;&#x2F;host&#x2F;?x&#x3D;1&amp;amp;y&#x3D;2”&gt;.</p>
</blockquote>
<p>Form 전송 시 만들어지는 URI는 anchor 스타일 링크(예를 들어 a 엘리먼트의 href attribute)를 사용하게 된다. 불행히도, 폼 필드를 구분지으려고 &amp;를 사용하는 것은, 문자 엔티티 참조를 위한 SGML(역주: HTML, XML등의 부모뻘 되는 언어) attribute 안에서 사용하는 것과 상호작용을 하게된다. 예를 들어, 링크를 위한 http&amp;colon;&#x2F;&#x2F;host&#x2F;?x&#x3D;1&amp;y&#x3D;2 이라는 URI는, 반드시 &lt;a href&#x3D;”http&amp;colon;&#x2F;&#x2F;host&#x2F;?x&#x3D;1&amp;#38;y&#x3D;2”&gt;  혹은 &lt;a href&#x3D;”http&amp;colon;&#x2F;&#x2F;host&#x2F;?x&#x3D;1&amp;amp;y&#x3D;2”&gt; 으로 쓰여야 한다.</p>
<blockquote>
<p>This means you can’t just copy-paste URLs into your HTML4 document if you want it to be valid — you’ll have to encode any ampersand characters first.</p>
</blockquote>
<p>이 말은 당신이 HTML4 문서에 URL을 단순히 복사-붙여넣기를 해서만은 유효하진 않을 거라는 의미이다 - 앰퍼샌드를 인코딩 해야할 거다.</p>
<h2 id="Ambiguous-ampersands-in-HTML5"><a href="#Ambiguous-ampersands-in-HTML5" class="headerlink" title="Ambiguous ampersands in HTML5"></a>Ambiguous ampersands in HTML5</h2><p>HTML5에서의 모호한 앰퍼샌드</p>
<blockquote>
<p>In HTML5, the first definition for ambiguous ampersands was added:</p>
</blockquote>
<p>HTML5에서 모호한 ampersand에 대한 정의가 처음으로 추가됐다.</p>
<blockquote>
<p>An ambiguous ampersand is a U+0026 AMPERSAND (&amp;) character that is not the last character in the file, that is not followed by a space character, that is not followed by a start tag that has not been omitted, and that is not followed by another U+0026 AMPERSAND (&amp;) character.</p>
</blockquote>
<p>모호한 앰퍼샌드는 파일의 마지막 문자가 아니며, 공백 문자가 뒤이어 나오지 않고, 생략되지 않은 시작 태그가 뒤에 오지 않고 다른 앰퍼샌드 문자가 뒤따르지 않는다.</p>
<blockquote>
<p>Ambiguous ampersands are non-conforming (invalid); unambiguous ampersands are generally conforming (valid). (As mentioned before: ampersands that are part of a named character reference that doesn’t end with a semicolon are unambiguous, but still invalid.)</p>
</blockquote>
<p>모호한 앰퍼샌드는 …(역주: 번역하기 어려워 생략)…(이전에 언급한 것처럼: 세미콜론으로 끝나지 않는 명명된 문자 참조의 일부로써 앰퍼샌드는 모호하진 않지만, 아직 유효하진 않다.</p>
<blockquote>
<p>In other words, if an unencoded ampersand is followed by EOF, a space character, &lt;, or &amp;, it’s perfectly valid.</p>
</blockquote>
<p>다시 말해, 인코드 안 된 앰퍼샌드 뒤로 EOF, 공백문자, &lt;, &amp;가 있다면 이건 완전히 유효하다.</p>
<blockquote>
<p>According to this definition, the ampersands in this example are all ambiguous, and thus invalid:</p>
</blockquote>
<p>이 정의에 의하면, 아래 예시에서 모든 앰퍼샌드는 모호하고, 그러므로 유효하지 않다.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;a href=&quot;https://example.com/?x=1&amp;y=2&quot;;&gt;foo&lt;/a&gt;</span><br><span class="line">&amp;123</span><br><span class="line">&amp;abc</span><br><span class="line">foo &amp;0 bar</span><br><span class="line">foo &amp;lolwat bar</span><br></pre></td></tr></table></figure>

<blockquote>
<p>However, this is valid HTML:</p>
</blockquote>
<p>그러나, 이건 또 유효한 HTML이다</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">foo &amp; bar</span><br><span class="line">foo&amp;&lt;i&gt;bar&lt;/i&gt;</span><br><span class="line">foo&amp;&amp;&amp; bar</span><br></pre></td></tr></table></figure>


<blockquote>
<p>Later the spec was changed, and the HTML spec now defines ambiguous ampersands as follows:</p>
</blockquote>
<p>나중에 스펙은 수정되고 현재 HTML 스펙은 아래와 같이 정의되어 있다.</p>
<blockquote>
<p>An ambiguous ampersand is a U+0026 AMPERSAND character (&amp;) that is followed by one or more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9), U+0061 LATIN SMALL LETTER A to U+007A LATIN SMALL LETTER Z, and U+0041 LATIN CAPITAL LETTER A to U+005A LATIN CAPITAL LETTER Z, followed by a U+003B SEMICOLON character (;), where these characters do not match any of the names given in the named character references section.</p>
</blockquote>
<p>모호한 앰퍼샌드는 하나 이상의 0~9 숫자, 대&#x2F;소문자 라틴 문자와 세미콜론으로 이어지는 엠퍼샌드를 의미하고, 이 문자들은 명명된 문자 참조 영역에 있는 이름에 매칭되지 않는다.</p>
<blockquote>
<p>This definition is probably easier to grok as a regular expression: a string contains an ambiguous ampersand if it matches &#x2F;&amp;([0-9a-zA-Z]+;)&#x2F; and if the first back-reference ($1) is not a known character reference.</p>
</blockquote>
<p>이 정의는 아마 정규식으로 더 이해하기 쉬울 것 같다. 앰퍼샌드가 포함된 문자열이 &#x2F;&amp;([0-9a-zA-Z]+;)&#x2F; 에 매치되고, back-reference 된 값(역주: 정규식에서 괄호안에 매칭되는 값)이 알려진 문자 참조가 아니어야 한다.</p>
<blockquote>
<p>The ampersands in this example are all ambiguous, and thus invalid:</p>
</blockquote>
<p>아래 앰퍼샌드는 모두 모호하다. 따라서 유효한 문법이 아니다.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&amp;123;</span><br><span class="line">&amp;abc;</span><br><span class="line">foo &amp;0; bar</span><br><span class="line">foo &amp;lolwat; bar</span><br></pre></td></tr></table></figure>

<blockquote>
<p>However, all these are unambiguous:</p>
</blockquote>
<p>그러나 아래는 모두 명확하다.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">foo &amp; bar</span><br><span class="line">foo&amp;&lt;i&gt;bar&lt;/i&gt;</span><br><span class="line">foo&amp;&amp;&amp; bar</span><br></pre></td></tr></table></figure>
<blockquote>
<p>…even the ones that were invalid as per the old definition, are now valid:</p>
</blockquote>
<p>…예전의 정의로는 유효하진 않지만, 현재 유효한 것은:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;a href=&quot;http://example.com/?x=1&amp;y=2&quot;;&gt;foo&lt;/a&gt;</span><br><span class="line">&amp;123</span><br><span class="line">&amp;abc</span><br><span class="line">foo &amp;0 bar</span><br><span class="line">foo &amp;lolwat bar</span><br></pre></td></tr></table></figure>

<blockquote>
<p>With the new definition, this is perfectly valid HTML — even though no HTML validator I know of recognizes this yet.</p>
</blockquote>
<p>새로운 정의에 의해서는, 완벽하게 유효한 HTML이다 - HTML 유효성 검사기가 아직 이걸 모른다 하더라도 말이다.</p>
<blockquote>
<p>So we’ve established that not all ampersand characters require escaping in HTML. Semi-related fun fact: In most cases, there’s no need to escape the &gt; character either. It has no special meaning (and is thus unambiguous) unless it’s part of a tag or an unquoted attribute value. For example, &lt;p&gt;foo &gt; bar&lt;&#x2F;p&gt; is perfectly valid and reliable HTML.</p>
</blockquote>
<p>이제 우리는 HTML안에서 모든 앰퍼샌드가 escape 될 필요는 없다는 게 확실해졌다. 크게 관련은 없지만 재밌는 사실은: &gt; 문자도 escape할 필요가 없다는 사실이다. 따옴표 없는 attribute값이나 태그의 일부가 아닌 이상 특수한 의미가 있지는 않다(모호하지 않음). 예를 들어, &lt;p&gt;foo &gt; bar&lt;&#x2F;p&gt;는 완전히 유효하며 믿을만 한 HTML이다.</p>
<h2 id="The-pedantic-nitty-gritty"><a href="#The-pedantic-nitty-gritty" class="headerlink" title="The pedantic nitty-gritty"></a>The pedantic nitty-gritty</h2><p>학술적인 핵심</p>
<blockquote>
<p>As mentioned before, some named character references work without a trailing semicolon (e.g. &amp;amp) even though it’s invalid markup. What complicates things even more is that these entities are handled differently in attribute values.</p>
</blockquote>
<p>말했지만, 일부 명명된 문자 참조는 세미콜론이 뒤에 붙지 않아도(그게 유효하지 않은 마크업 문법이라도) 동작한다. 이걸 더 복잡하게 만드는 건, 이 엔티티들이 attribute 값에서는 다르게 작동한다는 사실이다.</p>
<blockquote>
<p>If the character reference is being consumed as part of an attribute, and the last character matched is not a U+003B SEMICOLON character (;), and the next character is either a U+003D EQUALS SIGN character (&#x3D;) or an alphanumeric ASCII character, then, for historical reasons, all the characters that were matched after the U+0026 AMPERSAND character (&amp;) must be unconsumed, and nothing is returned. However, if this next character is in fact a U+003D EQUALS SIGN character (&#x3D;), then this is a parse error, because some legacy user agents will misinterpret the markup in those cases.</p>
</blockquote>
<p>만약 문자 참조가 attribute안에서 사용되고 세미콜론으로 끝나지 않으며 다음 글자가 &#x3D;나 알파벳, 숫자일 경우, 관행적으로, &amp; 이후 매칭되는 모든 문자들은 처리되지 않고 아무것도 리턴되지 않는다. 그러나 이 ‘다음 문자’가 &#x3D;이라면, parse error가 발생하는데, 오래된 user agent가 오역할 수 있기 때문이다.</p>
<blockquote>
<p>Take this (obviously invalid) HTML, for example:</p>
</blockquote>
<p>예를 들어, 명백히 유효하지 않은 다음 HTML을 보라</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;p title=&quot;foo&amp;ampbar&quot;&gt;</span><br><span class="line">foo&amp;ampbar</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Try it out in your browser. You’ll see that the paragraph’s text content displays as “foo&amp;bar”, while the titleattribute value is displayed as “foo&amp;ampbar”.</p>
</blockquote>
<p>네 브라우저에서 시도해봐라. 내용은 “foo&amp;bar”라고 나오지만, title attribute 값은 foo&amp;ampbar로 나올 것이다.</p>
<h2 id="Mothereffing-ambiguous-ampersands"><a href="#Mothereffing-ambiguous-ampersands" class="headerlink" title="Mothereffing ambiguous ampersands"></a>Mothereffing ambiguous ampersands</h2><p>형편없는 모호한 앰퍼샌드</p>
<blockquote>
<p>To summarize: there’s a difference between unencoded ampersands (sometimes valid), ambiguous ampersands (always invalid) and encoded ampersands (always valid). An unencoded ampersand is not always an ambiguous ampersand. An unambiguous ampersand can still be invalid.</p>
</blockquote>
<p>요약하자면: 인코딩 안 된 앰퍼샌드(가끔 유효한), 모호한 앰퍼샌드(언제나 유효하지 않은), 그리고 인코딩된 앰퍼샌드(언제나 유효한) 사이에는 차이점이 있다. 인코딩이 안 된 앰퍼샌드가 항상 모호한 앰퍼샌드인 건 아니다. 모호하지 않은 앰퍼샌드도 여전히 유효하지 않을 수 있다.</p>
<blockquote>
<p>In my opinion, this is all a bit confusing. But it doesn’t have to be! When in doubt, just encode your effin’ ampersands.</p>
</blockquote>
<p>내 생각에, 이것들은 좀 헷갈린다. 하지만 그럴 필요는 없다! 의심스러우면, 망할 앰퍼샌드를 인코딩해라.</p>
<blockquote>
<p>That said, if you want to find out if an HTML snippet contains any ambiguous ampersands or character references that don’t end with a semicolon (both of which are invalid), feel free to use mothereff.in&#x2F;ampersands.</p>
</blockquote>
<p>즉, HTML 스니펫에 모호한 앰퍼샌드나 세미콜론 (세미콜론으로 끝나지 않는 문자 참조)이 모두 포함되어 있는지 알아 보려면 (둘 다 유효하지 않음) mothereff.in&#x2F;ampersands를 자유롭게 사용하기 바란다.</p>
<p><img src="https://mathiasbynens.be/_img/ambiguous-ampersands/tool@2x.png" alt="Ambiguous ampersand checker for HTML"></p>
<blockquote>
<p>Note that this is not a complete HTML validator; it will only look for ambiguous ampersands and semicolon-free character references. (Hopefully, bug #841 will be fixed soon, so we can just rely on validator.nu instead.)<br>Understanding what ambiguous ampersands are and how they work is especially important for library authors wishing to deal with HTML entities. Not accounting for these edge cases might result in XSS or other security vulnerabilities in your code.</p>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>youngiggy
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://haah.kr/2017/09/08/ambiguous-ampersands/" title="모호한 앰퍼샌드(&amp;, ampersand)">https://haah.kr/2017/09/08/ambiguous-ampersands/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/HTML/" rel="tag"># HTML</a>
              <a href="/tags/PHP/" rel="tag"># PHP</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2017/09/04/kids-privacy/" rel="prev" title="독후감 - 아이의 자존감">
                  <i class="fa fa-chevron-left"></i> 독후감 - 아이의 자존감
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2017/09/18/book-978-89-6262-115-0/" rel="next" title="독후감 - 세상물정의 물리학">
                  독후감 - 세상물정의 물리학 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">youngiggy</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  




  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"youngiggy-github-io","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
